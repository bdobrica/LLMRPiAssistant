<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Pi Wi-Fi Setup</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:24px;max-width:760px}
    .card{border:1px solid #ddd;border-radius:12px;padding:16px;margin-bottom:16px}
    input,select,button{font-size:16px;padding:10px;border-radius:10px;border:1px solid #ccc}
    button{cursor:pointer}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .row > *{flex:1}
    small{color:#666}
    code{background:#f6f6f6;padding:2px 6px;border-radius:6px}
  </style>
</head>
<body>
  <h1>Pi Wi-Fi Setup</h1>

  <div class="card">
    <h3>Status</h3>
    <p><b>Interface:</b> <code>{{ iface }}</code></p>
    <p><b>Wi-Fi state:</b> {{ wifi_state }}</p>
    <p><b>Active:</b></p>
    <ul>
      {% for line in active %}
        <li><code>{{ line }}</code></li>
      {% endfor %}
    </ul>
    <small>If you just saved credentials, give it ~10â€“20 seconds to connect.</small>
  </div>

  <div class="card">
    <h3>Connect to Wi-Fi</h3>
    <form method="post" action="{{ url_for('connect') }}">
      <div class="row">
        <div>
          <label>SSID</label><br>
          <select name="ssid" required>
            {% for s in ssids %}
              <option value="{{ s }}">{{ s }}</option>
            {% endfor %}
          </select>
        </div>
        <div>
          <label>Password</label><br>
          <input type="password" name="password" placeholder="Wi-Fi password">
        </div>
      </div>
      <p><button type="submit">Save &amp; Connect</button></p>
      <small>For open networks, leave password blank.</small>
    </form>
  </div>

  <div class="card">
    <h3>Saved networks (NetworkManager)</h3>
    <ul>
      {% for c in saved %}
        <li>{{ c }}</li>
      {% endfor %}
    </ul>
    <small>NetworkManager will auto-connect to known networks when available.</small>
  </div>
</body>
</html>